// This file was auto-generated by Fern from our API Definition.

import * as phenoml from "../../../src/api/index";
import { phenomlClient } from "../../../src/Client";
import { mockServerPool } from "../../mock-server/MockServerPool";

describe("FhirProviderClient", () => {
    test("create (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "Epic Sandbox",
            provider: "athenahealth",
            auth_method: "client_secret",
            base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
        };
        const rawResponseBody = {
            success: true,
            message: "Fhir provider created successfully",
            data: {
                id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                user_id: "user-123",
                name: "Epic Sandbox",
                description: "Epic sandbox environment for testing",
                provider: "athenahealth",
                base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                client_id: "your-client-id",
                auth_configs: {
                    key: {
                        auth_config_id: "auth-config-123",
                        is_active_auth_config: true,
                        public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                        credential_expiry: "2024-12-31T23:59:59Z",
                        scopes: "system/Patient.read system/Observation.read",
                    },
                },
                is_active: true,
                last_updated: "2024-01-15T10:30:00Z",
            },
        };
        server
            .mockEndpoint()
            .post("/fhir-provider/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.fhirProvider.create({
            name: "Epic Sandbox",
            provider: "athenahealth",
            auth_method: "client_secret",
            base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
        });
        expect(response).toEqual({
            success: true,
            message: "Fhir provider created successfully",
            data: {
                id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                user_id: "user-123",
                name: "Epic Sandbox",
                description: "Epic sandbox environment for testing",
                provider: "athenahealth",
                base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                client_id: "your-client-id",
                auth_configs: {
                    key: {
                        auth_config_id: "auth-config-123",
                        is_active_auth_config: true,
                        public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                        credential_expiry: "2024-12-31T23:59:59Z",
                        scopes: "system/Patient.read system/Observation.read",
                    },
                },
                is_active: true,
                last_updated: "2024-01-15T10:30:00Z",
            },
        });
    });

    test("create (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "x",
            provider: "athenahealth",
            auth_method: "client_secret",
            base_url: "base_url",
        };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/fhir-provider/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.create({
                name: "x",
                provider: "athenahealth",
                auth_method: "client_secret",
                base_url: "base_url",
            });
        }).rejects.toThrow(phenoml.fhirProvider.BadRequestError);
    });

    test("create (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "x",
            provider: "athenahealth",
            auth_method: "client_secret",
            base_url: "base_url",
        };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/fhir-provider/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.create({
                name: "x",
                provider: "athenahealth",
                auth_method: "client_secret",
                base_url: "base_url",
            });
        }).rejects.toThrow(phenoml.fhirProvider.UnauthorizedError);
    });

    test("create (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "x",
            provider: "athenahealth",
            auth_method: "client_secret",
            base_url: "base_url",
        };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/fhir-provider/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.create({
                name: "x",
                provider: "athenahealth",
                auth_method: "client_secret",
                base_url: "base_url",
            });
        }).rejects.toThrow(phenoml.fhirProvider.ForbiddenError);
    });

    test("create (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            name: "x",
            provider: "athenahealth",
            auth_method: "client_secret",
            base_url: "base_url",
        };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/fhir-provider/create")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.create({
                name: "x",
                provider: "athenahealth",
                auth_method: "client_secret",
                base_url: "base_url",
            });
        }).rejects.toThrow(phenoml.fhirProvider.InternalServerError);
    });

    test("list (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            success: true,
            message: "Fhir providers retrieved successfully",
            fhir_providers: [
                {
                    id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                    user_id: "user-123",
                    name: "Epic Sandbox",
                    description: "Epic sandbox environment for testing",
                    provider: "athenahealth",
                    base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                    client_id: "your-client-id",
                    auth_configs: {
                        key: {
                            auth_config_id: "auth-config-123",
                            is_active_auth_config: true,
                            public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                            credential_expiry: "2024-12-31T23:59:59Z",
                            scopes: "system/Patient.read system/Observation.read",
                        },
                    },
                    is_active: true,
                    last_updated: "2024-01-15T10:30:00Z",
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/fhir-provider/list")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.fhirProvider.list();
        expect(response).toEqual({
            success: true,
            message: "Fhir providers retrieved successfully",
            fhir_providers: [
                {
                    id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                    user_id: "user-123",
                    name: "Epic Sandbox",
                    description: "Epic sandbox environment for testing",
                    provider: "athenahealth",
                    base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                    client_id: "your-client-id",
                    auth_configs: {
                        key: {
                            auth_config_id: "auth-config-123",
                            is_active_auth_config: true,
                            public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                            credential_expiry: "2024-12-31T23:59:59Z",
                            scopes: "system/Patient.read system/Observation.read",
                        },
                    },
                    is_active: true,
                    last_updated: "2024-01-15T10:30:00Z",
                },
            ],
        });
    });

    test("list (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fhir-provider/list")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.list();
        }).rejects.toThrow(phenoml.fhirProvider.UnauthorizedError);
    });

    test("list (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fhir-provider/list")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.list();
        }).rejects.toThrow(phenoml.fhirProvider.ForbiddenError);
    });

    test("list (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fhir-provider/list")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.list();
        }).rejects.toThrow(phenoml.fhirProvider.InternalServerError);
    });

    test("get (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            success: true,
            message: "Fhir provider created successfully",
            data: {
                id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                user_id: "user-123",
                name: "Epic Sandbox",
                description: "Epic sandbox environment for testing",
                provider: "athenahealth",
                base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                client_id: "your-client-id",
                auth_configs: {
                    key: {
                        auth_config_id: "auth-config-123",
                        is_active_auth_config: true,
                        public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                        credential_expiry: "2024-12-31T23:59:59Z",
                        scopes: "system/Patient.read system/Observation.read",
                    },
                },
                is_active: true,
                last_updated: "2024-01-15T10:30:00Z",
            },
        };
        server
            .mockEndpoint()
            .get("/fhir-provider/fhir_provider_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.fhirProvider.get("fhir_provider_id");
        expect(response).toEqual({
            success: true,
            message: "Fhir provider created successfully",
            data: {
                id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                user_id: "user-123",
                name: "Epic Sandbox",
                description: "Epic sandbox environment for testing",
                provider: "athenahealth",
                base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                client_id: "your-client-id",
                auth_configs: {
                    key: {
                        auth_config_id: "auth-config-123",
                        is_active_auth_config: true,
                        public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                        credential_expiry: "2024-12-31T23:59:59Z",
                        scopes: "system/Patient.read system/Observation.read",
                    },
                },
                is_active: true,
                last_updated: "2024-01-15T10:30:00Z",
            },
        });
    });

    test("get (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fhir-provider/fhir_provider_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.get("fhir_provider_id");
        }).rejects.toThrow(phenoml.fhirProvider.UnauthorizedError);
    });

    test("get (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fhir-provider/fhir_provider_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.get("fhir_provider_id");
        }).rejects.toThrow(phenoml.fhirProvider.ForbiddenError);
    });

    test("get (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fhir-provider/fhir_provider_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.get("fhir_provider_id");
        }).rejects.toThrow(phenoml.fhirProvider.NotFoundError);
    });

    test("get (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fhir-provider/fhir_provider_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.get("fhir_provider_id");
        }).rejects.toThrow(phenoml.fhirProvider.InternalServerError);
    });

    test("delete (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { success: true, message: "Fhir provider deleted successfully" };
        server
            .mockEndpoint()
            .delete("/fhir-provider/fhir_provider_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.fhirProvider.delete("fhir_provider_id");
        expect(response).toEqual({
            success: true,
            message: "Fhir provider deleted successfully",
        });
    });

    test("delete (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/fhir-provider/fhir_provider_id")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.delete("fhir_provider_id");
        }).rejects.toThrow(phenoml.fhirProvider.UnauthorizedError);
    });

    test("delete (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/fhir-provider/fhir_provider_id")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.delete("fhir_provider_id");
        }).rejects.toThrow(phenoml.fhirProvider.ForbiddenError);
    });

    test("delete (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/fhir-provider/fhir_provider_id")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.delete("fhir_provider_id");
        }).rejects.toThrow(phenoml.fhirProvider.NotFoundError);
    });

    test("delete (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .delete("/fhir-provider/fhir_provider_id")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.delete("fhir_provider_id");
        }).rejects.toThrow(phenoml.fhirProvider.InternalServerError);
    });

    test("addAuthConfig (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_method: "client_secret" };
        const rawResponseBody = {
            success: true,
            message: "Fhir provider created successfully",
            data: {
                id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                user_id: "user-123",
                name: "Epic Sandbox",
                description: "Epic sandbox environment for testing",
                provider: "athenahealth",
                base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                client_id: "your-client-id",
                auth_configs: {
                    key: {
                        auth_config_id: "auth-config-123",
                        is_active_auth_config: true,
                        public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                        credential_expiry: "2024-12-31T23:59:59Z",
                        scopes: "system/Patient.read system/Observation.read",
                    },
                },
                is_active: true,
                last_updated: "2024-01-15T10:30:00Z",
            },
        };
        server
            .mockEndpoint()
            .patch("/fhir-provider/1716d214-de93-43a4-aa6b-a878d864e2ad/add-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.fhirProvider.addAuthConfig("1716d214-de93-43a4-aa6b-a878d864e2ad", {
            auth_method: "client_secret",
        });
        expect(response).toEqual({
            success: true,
            message: "Fhir provider created successfully",
            data: {
                id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                user_id: "user-123",
                name: "Epic Sandbox",
                description: "Epic sandbox environment for testing",
                provider: "athenahealth",
                base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                client_id: "your-client-id",
                auth_configs: {
                    key: {
                        auth_config_id: "auth-config-123",
                        is_active_auth_config: true,
                        public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                        credential_expiry: "2024-12-31T23:59:59Z",
                        scopes: "system/Patient.read system/Observation.read",
                    },
                },
                is_active: true,
                last_updated: "2024-01-15T10:30:00Z",
            },
        });
    });

    test("addAuthConfig (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_method: "client_secret" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/add-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.addAuthConfig("fhir_provider_id", {
                auth_method: "client_secret",
            });
        }).rejects.toThrow(phenoml.fhirProvider.BadRequestError);
    });

    test("addAuthConfig (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_method: "client_secret" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/add-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.addAuthConfig("fhir_provider_id", {
                auth_method: "client_secret",
            });
        }).rejects.toThrow(phenoml.fhirProvider.UnauthorizedError);
    });

    test("addAuthConfig (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_method: "client_secret" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/add-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.addAuthConfig("fhir_provider_id", {
                auth_method: "client_secret",
            });
        }).rejects.toThrow(phenoml.fhirProvider.ForbiddenError);
    });

    test("addAuthConfig (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_method: "client_secret" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/add-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.addAuthConfig("fhir_provider_id", {
                auth_method: "client_secret",
            });
        }).rejects.toThrow(phenoml.fhirProvider.NotFoundError);
    });

    test("addAuthConfig (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_method: "client_secret" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/add-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.addAuthConfig("fhir_provider_id", {
                auth_method: "client_secret",
            });
        }).rejects.toThrow(phenoml.fhirProvider.InternalServerError);
    });

    test("setActiveAuthConfig (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth-config-123" };
        const rawResponseBody = {
            success: true,
            message: "FHIR provider auth config set as active successfully",
            data: {
                id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                user_id: "user-123",
                name: "Epic Sandbox",
                description: "Epic sandbox environment for testing",
                provider: "athenahealth",
                base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                client_id: "your-client-id",
                auth_configs: {
                    key: {
                        auth_config_id: "auth-config-123",
                        is_active_auth_config: true,
                        public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                        credential_expiry: "2024-12-31T23:59:59Z",
                        scopes: "system/Patient.read system/Observation.read",
                    },
                },
                is_active: true,
                last_updated: "2024-01-15T10:30:00Z",
            },
        };
        server
            .mockEndpoint()
            .patch("/fhir-provider/1716d214-de93-43a4-aa6b-a878d864e2ad/set-active-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.fhirProvider.setActiveAuthConfig("1716d214-de93-43a4-aa6b-a878d864e2ad", {
            auth_config_id: "auth-config-123",
        });
        expect(response).toEqual({
            success: true,
            message: "FHIR provider auth config set as active successfully",
            data: {
                id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                user_id: "user-123",
                name: "Epic Sandbox",
                description: "Epic sandbox environment for testing",
                provider: "athenahealth",
                base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                client_id: "your-client-id",
                auth_configs: {
                    key: {
                        auth_config_id: "auth-config-123",
                        is_active_auth_config: true,
                        public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                        credential_expiry: "2024-12-31T23:59:59Z",
                        scopes: "system/Patient.read system/Observation.read",
                    },
                },
                is_active: true,
                last_updated: "2024-01-15T10:30:00Z",
            },
        });
    });

    test("setActiveAuthConfig (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth_config_id" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/set-active-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.setActiveAuthConfig("fhir_provider_id", {
                auth_config_id: "auth_config_id",
            });
        }).rejects.toThrow(phenoml.fhirProvider.BadRequestError);
    });

    test("setActiveAuthConfig (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth_config_id" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/set-active-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.setActiveAuthConfig("fhir_provider_id", {
                auth_config_id: "auth_config_id",
            });
        }).rejects.toThrow(phenoml.fhirProvider.UnauthorizedError);
    });

    test("setActiveAuthConfig (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth_config_id" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/set-active-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.setActiveAuthConfig("fhir_provider_id", {
                auth_config_id: "auth_config_id",
            });
        }).rejects.toThrow(phenoml.fhirProvider.ForbiddenError);
    });

    test("setActiveAuthConfig (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth_config_id" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/set-active-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.setActiveAuthConfig("fhir_provider_id", {
                auth_config_id: "auth_config_id",
            });
        }).rejects.toThrow(phenoml.fhirProvider.NotFoundError);
    });

    test("setActiveAuthConfig (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth_config_id" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/set-active-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.setActiveAuthConfig("fhir_provider_id", {
                auth_config_id: "auth_config_id",
            });
        }).rejects.toThrow(phenoml.fhirProvider.InternalServerError);
    });

    test("removeAuthConfig (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth-config-123" };
        const rawResponseBody = {
            success: true,
            message: "Auth configuration removed successfully",
            data: {
                id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                user_id: "user-123",
                name: "Epic Sandbox",
                description: "Epic sandbox environment for testing",
                provider: "athenahealth",
                base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                client_id: "your-client-id",
                auth_configs: {
                    key: {
                        auth_config_id: "auth-config-123",
                        is_active_auth_config: true,
                        public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                        credential_expiry: "2024-12-31T23:59:59Z",
                        scopes: "system/Patient.read system/Observation.read",
                    },
                },
                is_active: true,
                last_updated: "2024-01-15T10:30:00Z",
            },
        };
        server
            .mockEndpoint()
            .patch("/fhir-provider/1716d214-de93-43a4-aa6b-a878d864e2ad/remove-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.fhirProvider.removeAuthConfig("1716d214-de93-43a4-aa6b-a878d864e2ad", {
            auth_config_id: "auth-config-123",
        });
        expect(response).toEqual({
            success: true,
            message: "Auth configuration removed successfully",
            data: {
                id: "1716d214-de93-43a4-aa6b-a878d864e2ad",
                user_id: "user-123",
                name: "Epic Sandbox",
                description: "Epic sandbox environment for testing",
                provider: "athenahealth",
                base_url: "https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4",
                client_id: "your-client-id",
                auth_configs: {
                    key: {
                        auth_config_id: "auth-config-123",
                        is_active_auth_config: true,
                        public_key_cert_pem: "-----BEGIN CERTIFICATE-----\n...",
                        credential_expiry: "2024-12-31T23:59:59Z",
                        scopes: "system/Patient.read system/Observation.read",
                    },
                },
                is_active: true,
                last_updated: "2024-01-15T10:30:00Z",
            },
        });
    });

    test("removeAuthConfig (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth_config_id" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/remove-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.removeAuthConfig("fhir_provider_id", {
                auth_config_id: "auth_config_id",
            });
        }).rejects.toThrow(phenoml.fhirProvider.BadRequestError);
    });

    test("removeAuthConfig (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth_config_id" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/remove-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.removeAuthConfig("fhir_provider_id", {
                auth_config_id: "auth_config_id",
            });
        }).rejects.toThrow(phenoml.fhirProvider.UnauthorizedError);
    });

    test("removeAuthConfig (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth_config_id" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/remove-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.removeAuthConfig("fhir_provider_id", {
                auth_config_id: "auth_config_id",
            });
        }).rejects.toThrow(phenoml.fhirProvider.ForbiddenError);
    });

    test("removeAuthConfig (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth_config_id" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/remove-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.removeAuthConfig("fhir_provider_id", {
                auth_config_id: "auth_config_id",
            });
        }).rejects.toThrow(phenoml.fhirProvider.NotFoundError);
    });

    test("removeAuthConfig (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new phenomlClient({ maxRetries: 0, token: "test", environment: server.baseUrl });
        const rawRequestBody = { auth_config_id: "auth_config_id" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/fhir-provider/fhir_provider_id/remove-auth-config")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.fhirProvider.removeAuthConfig("fhir_provider_id", {
                auth_config_id: "auth_config_id",
            });
        }).rejects.toThrow(phenoml.fhirProvider.InternalServerError);
    });
});
